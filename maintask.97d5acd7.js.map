{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,oDAMMC,EAAOC,SAASC,eAAe,eAC/BC,EAAQF,SAASG,cAAc,SAC/BC,EAAWJ,SAASG,cAAc,YAClCE,EAAcL,SAASG,cAAc,cACrCG,EAAc,IAAI,EAAAC,EAAAC,SAClBC,EAAkB,IAAIC,EAAAC,GAAJ,CAAmB,c,SAsB5BC,I,OAAAC,EAAcC,MAAAC,KAAAC,U,UAAdH,I,OAAAA,EAAfH,EAAAb,EAAA,CAAAa,EAAAO,GAAAC,MAAA,SAAAC,I,IAEUC,EACAC,EACAC,EAuBEC,EAiB2BC,EAAfC,E,2FA1CGnB,EAAYoB,Y,OAA7BN,EAAQO,EAAAC,KACRP,EAAgBD,EAASS,KAAKC,KAC9BR,EAA0BS,KAAKC,KACnCZ,EAASS,KAAKI,UAAY3B,EAAY4B,SAGR,IAA5Bd,EAASS,KAAKI,WAChBE,EAAAC,OAAOC,QACL,4EAIqB,IAArB/B,EAAYgC,MAA0C,IAA5BlB,EAASS,KAAKI,YAC1C5B,EAAYkC,UAAUC,OAAO,aAC7BL,EAAAC,OAAOK,KAAK,oBAA4CC,OAAxBtB,EAASS,KAAKI,UAAU,cAGtD3B,EAAYgC,OAAShB,IACvBjB,EAAYkC,UAAUI,IAAI,aAC1BR,EAAAC,OAAOQ,QACL,+DAI4B,IAA5BxB,EAASS,KAAKI,YACVV,EAAaF,EAAcwB,KAAI,SAAAC,GACnC,MAAO,8EAGuBJ,OADLI,EAAMC,cAAc,4CACaL,OAA5BI,EAAME,aAAa,WAGKN,OAHII,EAAMG,KAAK,0JAIfP,OADAI,EAAMI,MAAM,sEAETR,OADHI,EAAMK,MAAM,yEAERT,OADDI,EAAMM,SAAS,0EACEV,OAAhBI,EAAMO,UAAU,6D,IAI5EjD,EAASkD,mBAAmB,YAAa/B,EAAWgC,KAAK,KAEhC,IAArBjD,EAAYgC,OACiBd,EAAAxB,SAC5BG,cAAc,YACdqD,kBAAkBC,wBAFbhC,EAAuBD,EAAvBkC,OAIRC,OAAOC,SAAS,CACdC,IAAkB,EAAbpC,EACLqC,SAAU,YAIdxD,EAAYyD,WACZtD,EAAgBuD,W,kDAGlBC,QAAQC,IAAGvC,EAAAwC,I,2DA1DcrD,MAAAC,KAAAC,U,CApB7BjB,EAAKqE,iBAAiB,UAItB,SAAkBC,GAChBA,EAAEC,iBACF,IAAMC,EAAerE,EAAMsE,MAAMC,OAEjC,GAAqB,KAAjBF,EAAqB,OAEzBlE,EAAYkC,UAAUI,IAAI,aAE1BvC,EAASsE,UAAY,GACrBpE,EAAYqE,YAEZrE,EAAYsE,YAAcL,EAE1B3D,G,IAhBFP,EAAYkC,UAAUI,IAAI,aAC1BtC,EAAY+D,iBAAiB,QAASxD,E","sources":["src/index.js"],"sourcesContent":["import './css/styles.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport FetchImages from './fetchImages.js';\n\nconst form = document.getElementById('search-form');\nconst input = document.querySelector('input');\nconst cardList = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst fetchImages = new FetchImages();\nconst galleryOfImages = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.classList.add('is-hidden');\nloadMoreBtn.addEventListener('click', fetchImagesFoo);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  const currentQuery = input.value.trim();\n\n  if (currentQuery === '') return;\n\n  loadMoreBtn.classList.add('is-hidden');\n\n  cardList.innerHTML = '';\n  fetchImages.resetPage();\n\n  fetchImages.searchQuery = currentQuery;\n\n  fetchImagesFoo();\n}\n\nasync function fetchImagesFoo() {\n  try {\n    const response = await fetchImages.getImages();\n    const arrayOfImages = response.data.hits;\n    const maxAllowedAmountOfPages = Math.ceil(\n      response.data.totalHits / fetchImages.perPage\n    );\n\n    if (response.data.totalHits === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    }\n\n    if (fetchImages.page === 1 && response.data.totalHits !== 0) {\n      loadMoreBtn.classList.remove('is-hidden');\n      Notify.info(`Hooray! We found ${response.data.totalHits} images.`);\n    }\n\n    if (fetchImages.page === maxAllowedAmountOfPages) {\n      loadMoreBtn.classList.add('is-hidden');\n      Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n\n    if (response.data.totalHits !== 0) {\n      const cardMarkup = arrayOfImages.map(image => {\n        return `\n                <div class=\"photo-card\">\n                      <a href=\"${image.largeImageURL}\">\n                          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\"/>\n                      </a>\n                      <div class=\"info\">\n                           <p class=\"info-item\"><b>Likes</b>${image.likes}</p>\n                           <p class=\"info-item\"><b>Views</b>${image.views}</p>\n                           <p class=\"info-item\"><b>Comments</b>${image.comments}</p>\n                           <p class=\"info-item\"><b>Downloads</b>${image.downloads}</p>\n                      </div>\n                </div>`;\n      });\n      cardList.insertAdjacentHTML('beforeend', cardMarkup.join(''));\n\n      if (fetchImages.page !== 1) {\n        const { height: cardHeight } = document\n          .querySelector('.gallery')\n          .firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n\n      fetchImages.nextPage();\n      galleryOfImages.refresh();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}"],"names":["$bpxeT","parcelRequire","$b8f9b7833fa37166$var$form","document","getElementById","$b8f9b7833fa37166$var$input","querySelector","$b8f9b7833fa37166$var$cardList","$b8f9b7833fa37166$var$loadMoreBtn","$b8f9b7833fa37166$var$fetchImages","$dWsfZ","default","$b8f9b7833fa37166$var$galleryOfImages","$parcel$interopDefault","$5IjG7","$b8f9b7833fa37166$var$fetchImagesFoo","$b8f9b7833fa37166$var$_fetchImagesFoo","apply","this","arguments","$2TvXO","mark","_callee","response","arrayOfImages","maxAllowedAmountOfPages","cardMarkup","ref","cardHeight","getImages","_ctx","sent","data","hits","Math","ceil","totalHits","perPage","$h6c0i","Notify","failure","page","classList","remove","info","concat","add","warning","map","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","insertAdjacentHTML","join","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","nextPage","refresh","console","log","t0","addEventListener","e","preventDefault","currentQuery","value","trim","innerHTML","resetPage","searchQuery"],"version":3,"file":"maintask.97d5acd7.js.map"}